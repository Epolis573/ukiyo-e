"use strict";
var objs = {
        player: {},
        timer: null
    },
    props = {
        offset: {
            y: 0
        }
    },
    constants = {
        device: 0 < navigator.userAgent.indexOf("iPhone") || 0 < navigator.userAgent.indexOf("iPad") || 0 < navigator.userAgent.indexOf("iPod") || 0 < navigator.userAgent.indexOf("Android") ? "sp" : "pc",
        responsive: window.innerWidth <= 768 ? "sp" : "pc"
    };

function onYouTubeIframeAPIReady() {
    for (var e = 0; e < document.querySelectorAll("[data-videoId]").length; e++) {
        var t = "id" + Date.now();
        document.querySelectorAll("[data-videoId]")[e].setAttribute("id", t), document.querySelectorAll("[data-videoId]")[e].nextElementSibling.setAttribute("data-id", t), objs.player[t] = new YT.Player(document.querySelectorAll("[data-videoId]")[e].getAttribute("id"), {
            videoId: document.querySelectorAll("[data-videoId]")[e].getAttribute("data-videoId"),
            playerVars: {
                rel: 0,
                playsinline: 1,
                loop: 1
            },
            events: {
                onReady: function(e) {}
            }
        })
    }
    for (e = 0; e < document.querySelectorAll("[data-id]").length; e++) document.querySelectorAll("[data-id]")[e].addEventListener("click", function(e) {
        e.preventDefault(), e.currentTarget.style.display = "none", objs.player[e.currentTarget.getAttribute("data-id")].playVideo()
    }, !1)
}
window.addEventListener("resize", function() {
    props.responsive = window.innerWidth <= 768 ? "sp" : "pc"
}, !1), window.dispatchEvent(new Event("resize"));
var tag = document.createElement("script");
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName("script")[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
var imgLoad = imagesLoaded(document.querySelector("body"), function(e) {});
imgLoad.on("progress", function(e, t) {
    !document.querySelector("main").classList.contains("container-main--top") || location.hash && "page" == location.hash.substr(1) || (document.querySelector(".page-opening p").style.height = Math.floor(e.progressedCount / e.images.length * 100) + "%")
}), imgLoad.on("always", function(e) {
    objs.xhr = new XMLHttpRequest;

    function t() {
        for (var e = 0; e < document.querySelectorAll("[data-pjax-container] [data-pjax-push]").length; e++) document.querySelectorAll("[data-pjax-container] [data-pjax-push]")[e].addEventListener("click", function(e) {
            var t;
            e.preventDefault(), e.currentTarget.href != history.state.url && (t = e.currentTarget, document.querySelector(".page-loading").classList.remove("js-inactive"), objs.timer && (clearTimeout(objs.timer), objs.timer = null), setTimeout(function() {
                location.href != t.href && (history.pushState({
                    url: t.href
                }, null, t.href), objs.xhr.abort(), objs.xhr.open("GET", t.href), objs.xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest"), objs.xhr.responseType = "document", objs.xhr.overrideMimeType("text/html; charset=utf-8"), objs.xhr.timeout = "9999", objs.xhr.send(null))
            }, 500))
        }, !1);
        if (document.querySelector(".page-toggle button").addEventListener("ontouchstart" in document ? "touchstart" : "click", function(e) {
                e.preventDefault(), document.querySelector(".page-toggle button").classList.contains("js-active") ? (document.querySelector(".page-toggle button").classList.remove("js-active"), document.querySelector(".page-nav").classList.remove("js-active")) : (document.querySelector(".page-toggle button").classList.add("js-active"), document.querySelector(".page-nav").classList.add("js-active"))
            }), "pc" == constants.device) {
            objs.locomotiveScroll = new LocomotiveScroll({
                el: document.querySelector("[data-scroll-container]"),
                scrollbarContainer: document.querySelector("[data-scroll-container]").parentNode,
                smooth: !0
            }), objs.locomotiveScroll.on("scroll", function(e) {
                document.querySelector("main").classList.contains("container-main--top") && (e.scroll.y <= 0 ? document.querySelector(".header-scroll").classList.add("js-active") : document.querySelector(".header-scroll").classList.remove("js-active")), props.offset.y = e.scroll.y, props.offset.y <= 0 ? document.querySelector(".page-infomation--pc") && (document.querySelector(".page-infomation--pc").classList.add("js-active"), null == objs.timer && (objs.timer = setTimeout(function() {
                    0 == props.offset.y && document.querySelector(".page-infomation--pc").classList.remove("js-active"), clearTimeout(objs.timer), objs.timer = null
                }, 8e3))) : document.querySelector(".page-infomation--pc") && (document.querySelector(".page-infomation--pc").classList.remove("js-active"), clearTimeout(objs.timer), objs.timer = null)
            }), new LocomotiveScroll({
                el: document.querySelector("[data-scroll-nav]"),
                scrollbarContainer: document.querySelector("[data-scroll-nav]").parentNode,
                smooth: !0
            });
            for (var t = 0; t < document.querySelectorAll('a[href^="#"]').length; t++) document.querySelectorAll('a[href^="#"]')[t].addEventListener("click", function(e) {
                e.preventDefault(), objs.locomotiveScroll.scrollTo(document.querySelector("#" + e.target.href.split("#")[1]))
            }, !1)
        }
        if ("sp" == constants.device) {
            document.addEventListener("scroll", function(e) {
                props.offset.y = window.pageYOffset, props.offset.y <= 0 ? document.querySelector(".page-infomation--sp") && (document.querySelector(".page-infomation--sp").classList.add("js-active"), null == objs.timer && (objs.timer = setTimeout(function() {
                    0 == props.offset.y && document.querySelector(".page-infomation--sp").classList.remove("js-active"), clearTimeout(objs.timer), objs.timer = null
                }, 8e3))) : document.querySelector(".page-infomation--sp") && (document.querySelector(".page-infomation--sp").classList.remove("js-active"), clearTimeout(objs.timer), objs.timer = null)
            }, !1);
            for (var o = 0; o < document.querySelectorAll('a[href^="#"]').length; o++) document.querySelectorAll('a[href^="#"]')[o].addEventListener("click", function(e) {
                e.preventDefault(), TweenMax.to(document.scrollingElement, 1, {
                    scrollTop: document.querySelector("#" + e.target.href.split("#")[1]).offsetTop,
                    ease: "Power4.easeOut"
                })
            }, !1)
        }
        if (document.querySelector("main").classList.contains("container-main--top")) {
            new Swiper(".main-section--project .swiper-container", {
                loop: !0,
                slidesPerView: "auto",
                speed: 1e3,
                autoplay: {
                    delay: 3e3,
                    disableOnInteraction: !1,
                    autoplayDisableOnInteraction: !1
                }
            }), new Swiper(".main-section--artwork .swiper-container", {
                loop: !0,
                slidesPerView: "auto",
                speed: 1e3,
                autoplay: {
                    delay: 3e3,
                    disableOnInteraction: !1,
                    autoplayDisableOnInteraction: !1
                }
            }), document.querySelector(".page-container").addEventListener("mousemove", function(e) {
                document.querySelector(".page-cursor").style.transform = "translate(" + e.clientX + "px, " + e.clientY + "px)"
            }, !1);
            for (var n = 0; n < document.querySelectorAll(".swiper-container").length; n++) document.querySelectorAll(".swiper-container")[n].addEventListener("mouseover", function(e) {
                document.querySelector(".page-cursor").classList.add("js-active")
            }), document.querySelectorAll(".swiper-container")[n].addEventListener("mouseout", function(e) {
                document.querySelector(".page-cursor").classList.remove("js-active")
            })
        }
        if (document.querySelector("main").classList.contains("container-main--profile")) {
            document.querySelector(".page-container").addEventListener("mousemove", function(e) {
                document.querySelector(".page-pointer").style.transform = "translate(" + e.clientX + "px, " + e.clientY + "px)"
            }, !1);
            for (n = 0; n < document.querySelectorAll(".main-article--exhibition a").length; n++) document.querySelectorAll(".main-article--exhibition a")[n].addEventListener("mouseleave", function(e) {
                document.querySelector(".page-pointer").classList.remove("js-active")
            });
            for (n = 0; n < document.querySelectorAll(".main-article--exhibition a").length; n++) document.querySelectorAll(".main-article--exhibition a")[n].addEventListener("mouseover", function(e) {
                document.querySelector(".page-pointer span").className = "", document.querySelector(".page-pointer span").classList.add("js-" + e.currentTarget.getAttribute("data-index")), document.querySelector(".page-pointer").classList.add("js-active")
            })
        }
        for (var r = new IntersectionObserver(function(e, t) {
                e.forEach(function(e) {
                    e.isIntersecting && e.target.classList.add("js-active")
                })
            }, {
                root: null,
                rootMargin: "0px 0px 0px 0px",
                threshold: .1
            }), a = document.querySelectorAll("[data-pjax-container] [data-observe]"), n = 0; n < a.length; n++) r.observe(a[n])
    }
    objs.xhr.addEventListener("loadend", function() {
        var e;
        200 === objs.xhr.status && ("pc" == constants.device && objs.locomotiveScroll.destroy(), "sp" == constants.device && (document.scrollingElement.scrollTop = 0), document.title = objs.xhr.response.title, document.querySelector("[data-pjax-container]").innerHTML = objs.xhr.response.querySelector("[data-pjax-container]").innerHTML, (e = imagesLoaded(document.querySelector("[data-pjax-container]"), function(e) {})).on("progress", function(e, t) {
            document.querySelector(".page-loading p").style.height = Math.floor(e.progressedCount / e.images.length * 100) + "%"
        }), e.on("always", function(e) {
            document.querySelector(".page-loading p").style.height = "100%", setTimeout(function() {
                t(), onYouTubeIframeAPIReady(), document.querySelector(".page-loading").classList.add("js-inactive"), setTimeout(function() {
                    document.querySelector(".page-loading p").style.height = "0"
                }, 500)
            }, 500)
        }))
    }), window.addEventListener("popstate", function(e) {
        e.state && (document.querySelector(".page-loading").classList.remove("js-inactive"), setTimeout(function() {
            objs.xhr.abort(), objs.xhr.open("GET", e.state.url), objs.xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest"), objs.xhr.responseType = "document", objs.xhr.overrideMimeType("text/html; charset=utf-8"), objs.xhr.timeout = "9999", objs.xhr.send(null)
        }, 500))
    }), document.querySelector("main").classList.contains("container-main--top") ? (history.scrollRestoration = "manual", history.replaceState({
        url: location.href
    }, null, location.href), setTimeout(function() {
        document.querySelector(".page-loading").classList.add("js-inactive"), document.querySelector(".page-opening").classList.add("js-ready"), setTimeout(function() {
            document.querySelector(".page-opening").classList.add("js-active"), setTimeout(function() {
                t(), document.querySelector(".page-opening").classList.add("js-inactive"), setTimeout(function() {
                    "pc" == constants.device && document.querySelector(".page-infomation--pc") && (0 == props.offset.y && document.querySelector(".page-infomation--pc").classList.add("js-active"), null == objs.timer && (objs.timer = setTimeout(function() {
                        0 == props.offset.y && document.querySelector(".page-infomation--pc").classList.remove("js-active"), objs.timer = null
                    }, 8e3))), "sp" == constants.device && document.querySelector(".page-infomation--sp") && (0 == props.offset.y && document.querySelector(".page-infomation--sp").classList.add("js-active"), null == objs.timer && (objs.timer = setTimeout(function() {
                        0 == props.offset.y && document.querySelector(".page-infomation--sp").classList.remove("js-active"), objs.timer = null
                    }, 8e3)))
                }, 1500)
            }, 500)
        }, 0)
    }, 500)) : (history.scrollRestoration = "manual", history.replaceState({
        url: location.href
    }, null, location.href), t(), document.querySelector(".page-loading").classList.add("js-inactive"))
});